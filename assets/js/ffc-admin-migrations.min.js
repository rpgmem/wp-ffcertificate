!function(t){"use strict";t(document).ready(function(){var r="undefined"!=typeof ffcMigrations?ffcMigrations.strings:{};t(".ffc-migration-actions a.button-primary").on("click",function(e){e.preventDefault();var i=t(this),n=i.attr("href"),s=i.closest(".ffc-migration-card"),o=i.next(".description"),a=i.html(),c=0;if(!confirm(i.attr("onclick").match(/confirm\('([^']+)'/)[1]))return!1;return i.prop("disabled",!0).html('<span class="dashicons dashicons-update dashicons-spin"></span> '+(r.processing||"Processing...")),function e(){t.ajax({url:n,type:"GET",dataType:"html",success:function(n){var a=t(n).find(".ffc-migration-card").filter(function(){return t(this).find("h3").text()===s.find("h3").text()});if(a.length){var f=a.find(".ffc-progress-bar-fill").attr("style").match(/width:\s*(\d+\.?\d*)%/);f&&(s.find(".ffc-progress-bar-fill").attr("style","width: "+f[1]+"%"),s.find(".ffc-progress-bar-label").text(f[1]+"% "+(r.complete||"Complete")));var l=a.find(".ffc-migration-stats");s.find(".ffc-migration-stats").html(l.html()),c+=100,o.html((r.processed||"Processed ")+"<strong>"+c+"</strong> "+(r.records||"records...")),a.find(".button[disabled]").length>0?(i.html('<span class="dashicons dashicons-yes-alt"></span> '+(r.migrationComplete||"Migration Complete")),o.html("✓ "+(r.allRecordsMigrated||"All records have been successfully migrated.")),setTimeout(function(){location.reload()},2e3)):setTimeout(e,500)}else location.reload()},error:function(t,e,n){console.error("Migration error:",n),i.prop("disabled",!1).html(a),o.html("✗ "+(r.errorOccurred||"Error occurred. Please try again."))}})}(),!1})})}(jQuery);