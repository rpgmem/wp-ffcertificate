!function(t,i){"use strict";i.FFC=i.FFC||{};var e={validateCPF:function(t){if(11!==(t=t.replace(/[^\d]+/g,"")).length)return!1;if(/^(\d)\1{10}$/.test(t))return!1;for(var i=0,e=0;e<9;e++)i+=parseInt(t.charAt(e))*(10-e);var n=11-i%11;if(n>=10&&(n=0),n!==parseInt(t.charAt(9)))return!1;i=0;for(var a=0;a<10;a++)i+=parseInt(t.charAt(a))*(11-a);var r=11-i%11;return r>=10&&(r=0),r===parseInt(t.charAt(10))},validateRF:function(t){return 7===(t=t.replace(/[^\d]+/g,"")).length&&/^\d{7}$/.test(t)},validateEmail:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}},n={applyCpfRf:function(i){i&&0!==i.length||(i=t('input[name="cpf_rf"], input[name="cpf"], input[id*="cpf"]')),0!==i.length&&(i.each(function(){var i=t(this);i.off("input.cpfrf blur.cpfrf paste.cpfrf"),i.on("input.cpfrf",function(){var i=t(this).val().replace(/\D/g,"");i.length>11&&(i=i.substring(0,11));var e="";e=i.length<=7?i.length<=3?i:i.length<=6?i.substring(0,3)+"."+i.substring(3):i.substring(0,3)+"."+i.substring(3,6)+"-"+i.substring(6):i.length<=3?i:i.length<=6?i.substring(0,3)+"."+i.substring(3):i.length<=9?i.substring(0,3)+"."+i.substring(3,6)+"."+i.substring(6):i.substring(0,3)+"."+i.substring(3,6)+"."+i.substring(6,9)+"-"+i.substring(9),t(this).val(e),t(this).removeClass("ffc-invalid ffc-valid")}),i.on("blur.cpfrf",function(){var i=t(this).val().replace(/\D/g,"");if(0===i.length)return t(this).removeClass("ffc-invalid ffc-valid").removeAttr("aria-invalid aria-describedby"),void t(this).next(".ffc-field-error").remove();var n=!1,a="",r="undefined"!=typeof ffc_ajax&&ffc_ajax.strings?ffc_ajax.strings:{};7===i.length?(n=e.validateRF(i),a=r.rfInvalid||"Invalid RF"):11===i.length?(n=e.validateCPF(i),a=r.cpfInvalid||"Invalid CPF"):a=r.enterValidCpfRf||"Enter a valid CPF (11 digits) or RF (7 digits)";var s="ffc-error-"+(t(this).attr("id")||t(this).attr("name")||"cpfrf");if(n)t(this).removeClass("ffc-invalid").addClass("ffc-valid").removeAttr("aria-invalid aria-describedby"),t(this).next(".ffc-field-error").fadeOut(function(){t(this).remove()});else{t(this).removeClass("ffc-valid").addClass("ffc-invalid").attr("aria-invalid","true").attr("aria-describedby",s);var f=t(this).next(".ffc-field-error");0===f.length&&(f=t('<span class="ffc-field-error" role="alert"></span>').insertAfter(t(this))),f.attr("id",s).text(a).fadeIn(),setTimeout(function(){f.fadeOut()},5e3)}}),i.on("paste.cpfrf",function(){var i=t(this);setTimeout(function(){i.trigger("input")},10)}),i.val()&&i.trigger("input")}),t("#ffc-validation-styles").length||t('<style id="ffc-validation-styles">input.ffc-valid { border-color: #00a32a !important; background: #f0f9ff; }input.ffc-invalid { border-color: #d63638 !important; background: #fff3f3; }.ffc-field-error { display: block; color: #d63638; font-size: 12px; margin-top: 5px; animation: ffcSlideDown 0.3s ease; }</style>').appendTo("head"))},applyAuthCode:function(i){i&&0!==i.length||(i=t('input[name="ffc_auth_code"], .ffc-verify-input, .ffc-manual-auth-code')),0!==i.length&&i.each(function(){var i=t(this);i.off("input.authcode paste.authcode"),i.on("input.authcode",function(){var i=t(this).val().toUpperCase().replace(/[^A-Z0-9]/g,"");i.length>12&&(i=i.substring(0,12));var e="";e=i.length<=4?i:i.length<=8?i.substring(0,4)+"-"+i.substring(4):i.substring(0,4)+"-"+i.substring(4,8)+"-"+i.substring(8),t(this).val(e)}),i.on("paste.authcode",function(){var i=t(this);setTimeout(function(){i.trigger("input")},10)}),i.val()&&i.trigger("input")})},applyTicket:function(i){i&&0!==i.length||(i=t('input[name="ffc_ticket"], .ffc-ticket-input, #ffc_ticket')),0!==i.length&&i.each(function(){var i=t(this);i.off("input.ticket paste.ticket"),i.on("input.ticket",function(){var i=t(this).val().toUpperCase().replace(/[^A-Z0-9]/g,"");i.length>8&&(i=i.substring(0,8));var e="";e=i.length<=4?i:i.substring(0,4)+"-"+i.substring(4),t(this).val(e)}),i.on("paste.ticket",function(){var i=t(this);setTimeout(function(){i.trigger("input")},10)}),i.val()&&i.trigger("input")})}},a={showFormError:function(i,e){i.find(".ffc-form-error").remove();var n=t('<div class="ffc-form-error"></div>').css({background:"#f8d7da",color:"#721c24",padding:"15px 20px",margin:"0 0 20px 0","border-radius":"5px",border:"1px solid #f5c6cb","font-size":"14px","line-height":"1.5",animation:"ffcSlideDown 0.3s ease"}).html("<strong>⚠️ "+(0===e.indexOf("Error")?"":"Error: ")+"</strong>"+e);t("#ffc-slide-animation").length||t('<style id="ffc-slide-animation">@keyframes ffcSlideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }</style>').appendTo("head"),i.prepend(n),t("html, body").animate({scrollTop:n.offset().top-100},300),setTimeout(function(){n.fadeOut(300,function(){t(this).remove()})},1e4)},showFormSuccess:function(i,e){if(i.find(".ffc-form-error, .ffc-form-success").remove(),e&&e.trim().length>0)i.html(e);else{var n=t('<div class="ffc-form-success"></div>').css({background:"#d4edda",color:"#155724",padding:"20px",margin:"0 0 20px 0","border-radius":"5px",border:"1px solid #c3e6cb","text-align":"center",animation:"ffcSlideDown 0.3s ease"}).html('<h3 style="margin: 0 0 10px 0; font-size: 20px;">✅ '+(ffc_ajax.strings.success||"Success!")+'</h3><p style="margin: 0;">'+(ffc_ajax.strings.submissionSuccessful||"Your submission was successful.")+"</p>");i.html(n)}},refreshCaptcha:function(t,i,e){var n=t.find('label[for*="captcha"], .ffc-captcha-row label').first(),a=t.find('input[name="ffc_captcha_ans"]'),r=t.find('input[name="ffc_captcha_hash"]');n.length&&i&&n.html(i),r.length&&e&&r.val(e),a.length&&(a.val("").focus(),a.css("background-color","#fffbcc"),setTimeout(function(){a.css({"background-color":"#fff",transition:"background-color 0.5s"})},100))}},r={blocked:!1,waitSeconds:0,countdownInterval:null,show:function(i,e){this.blocked=!0,this.waitSeconds=e;var n=t(".ffc-form"),a=n.find('button[type="submit"]');n.prepend('<div class="ffc-rate-limit-notice"><div class="ffc-rate-limit-icon">⏱️</div><div class="ffc-rate-limit-message">'+i+' <strong id="ffc-countdown">0:00</strong></div></div>');var r="undefined"!=typeof ffc_ajax&&ffc_ajax.strings&&ffc_ajax.strings.wait||"Wait...";a.prop("disabled",!0).html(r+' (<span id="ffc-countdown-btn">0:00</span>)'),this.startCountdown()},startCountdown:function(){var i=this,e=this.waitSeconds,n=function(){if(e<=0)i.enable();else{var a=Math.floor(e/60),r=e%60,s=a+":"+(r<10?"0":"")+r;t("#ffc-countdown").text(s),t("#ffc-countdown-btn").text(s),e--,setTimeout(n,1e3)}};n()},enable:function(){this.blocked=!1,t(".ffc-rate-limit-notice").remove();var i="undefined"!=typeof ffc_ajax&&ffc_ajax.strings&&ffc_ajax.strings.send||"Send";t('.ffc-form button[type="submit"]').prop("disabled",!1).text(i)}};i.FFC.Frontend={Validation:e,Masks:n,UI:a,RateLimit:r},i.ffcUtils={applyCpfRfMask:n.applyCpfRf,applyAuthCodeMask:n.applyAuthCode,applyTicketMask:n.applyTicket,validateCPF:e.validateCPF,validateRF:e.validateRF,showFormError:a.showFormError,showFormSuccess:a.showFormSuccess,refreshCaptcha:a.refreshCaptcha},i.FFCRateLimit=r}(jQuery,window);