!function(e){"use strict";const n={rowCounter:0,init:function(){this.bindEvents(),this.initRowCounter()},initRowCounter:function(){const n=e("#ffc-working-hours-list tr").length;this.rowCounter=n},bindEvents:function(){e(document).on("click","#ffc-add-working-hour",this.addWorkingHour.bind(this)),e(document).on("click",".ffc-remove-hour",this.removeWorkingHour.bind(this)),e(document).on("change","#allow_cancellation",this.toggleCancellationHours),e(document).on("change","#require_login",this.toggleAllowedRoles)},addWorkingHour:function(n){n.preventDefault();const t=e("#ffc-working-hours-list"),o=this.rowCounter++;let i="";[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}].forEach(function(e){i+='<option value="'+e.value+'">'+e.label+"</option>"});const a=`\n                <tr>\n                    <td>\n                        <select name="ffc_calendar_working_hours[${o}][day]" required>\n                            ${i}\n                        </select>\n                    </td>\n                    <td>\n                        <input type="time" name="ffc_calendar_working_hours[${o}][start]" value="09:00" required />\n                    </td>\n                    <td>\n                        <input type="time" name="ffc_calendar_working_hours[${o}][end]" value="17:00" required />\n                    </td>\n                    <td>\n                        <button type="button" class="button ffc-remove-hour">Remove</button>\n                    </td>\n                </tr>\n            `;t.append(a)},removeWorkingHour:function(n){if(n.preventDefault(),!confirm(ffcSelfSchedulingEditor.strings.confirmDelete))return;const t=e(n.currentTarget).closest("tr");e("#ffc-working-hours-list tr").length<=1?alert("You must have at least one working hour configured."):t.fadeOut(300,function(){e(this).remove()})},toggleCancellationHours:function(){const n=e(this).is(":checked");e(".ffc-cancellation-hours").toggle(n)},toggleAllowedRoles:function(){const n=e(this).is(":checked");e(".ffc-allowed-roles").toggle(n)},initCleanup:function(){e(document).on("click",".ffc-cleanup-btn",function(){const n=e(this),t=n.data("action"),o=n.data("calendar-id"),i="undefined"!=typeof ffcSelfSchedulingEditor?ffcSelfSchedulingEditor.strings:{};let a=i.confirmCleanup||"Are you sure you want to delete these appointments? This action cannot be undone.";"all"===t&&(a=i.confirmCleanupAll||"Are you sure you want to delete ALL appointments? This will permanently remove all appointment data and cannot be undone!"),confirm(a)&&(n.prop("disabled",!0).text(i.deleting||"Deleting..."),e.ajax({url:ajaxurl,method:"POST",data:{action:"ffc_cleanup_appointments",calendar_id:o,cleanup_action:t,nonce:e("#ffc_cleanup_appointments_nonce").val()},success:function(e){e.success?(alert(e.data.message),location.reload()):(alert(e.data.message||i.errorDeleting||"Error deleting appointments"),n.prop("disabled",!1))},error:function(){alert(i.errorServer||"Error communicating with server"),n.prop("disabled",!1)}}))})}};e(document).ready(function(){n.init(),n.initCleanup()})}(jQuery);